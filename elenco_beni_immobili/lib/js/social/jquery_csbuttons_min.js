// VERSION: 1.0 LAST UPDATE: 18.12.2014
/* Social customs counter buttons - Made by Mathieu ORLANDO, contact@acrow.fr, Acrow, FRANCE - Website: http://csbuttons.acrow.fr/ */
(function(e){e.fn.cSButtons=function(t){var n={url:null,type:"facebook",txt:null,via:null,count:false,count_position:"right",apikey:null,media:null,lang:null,total:null};var r=e.extend(n,t);var i=0;var s=this.length;var o=0;var u=0;return this.each(function(){o++;var t=e(this).attr("data-url")!=undefined&&e(this).attr("data-url")!=""?e(this).attr("data-url"):r.url;var n=e(this).attr("data-type")!=undefined&&e(this).attr("data-type")!=""?e(this).attr("data-type"):r.type;var a=e(this).attr("data-txt")!=undefined&&e(this).attr("data-txt")!=""?e(this).attr("data-txt"):r.txt;var f=e(this).attr("data-via")!=undefined&&e(this).attr("data-via")!=""?e(this).attr("data-via"):r.via;var l=e(this).attr("data-count")!=undefined&&e(this).attr("data-count")!=""?e(this).attr("data-count"):r.count;var c=e(this).attr("data-count-position")!=undefined&&e(this).attr("data-count-position")!=""?e(this).attr("data-count-position"):r.count_position;var h=e(this).attr("data-apikey")!=undefined&&e(this).attr("data-apikey")!=""?e(this).attr("data-apikey"):r.apikey;var p=e(this).attr("data-media")!=undefined&&e(this).attr("data-media")!=""?e(this).attr("data-media"):r.media;var d=e(this).attr("data-lang")!=undefined&&e(this).attr("data-lang")!=""?e(this).attr("data-lang"):r.lang;var v=0;var m=0;var g="";t=t!=null?t:document.URL;$URL=t;if(l){if(c=="left"){e(this).prepend('<span class="csbuttons-count" />')}else{e(this).append('<span class="csbuttons-count" />')}}switch(n){case"twitter":var y=e(this);v=550;m=420;g=a!=null?"https://twitter.com/intent/tweet?original_referer="+encodeURIComponent(document.URL)+"&text="+encodeURIComponent(a)+"&url="+encodeURIComponent(t):"https://twitter.com/intent/tweet?original_referer="+encodeURIComponent(document.URL)+"&url="+encodeURIComponent(t);g=f!=null?g+"&via="+f:g;if(l){e("span.csbuttons-count",y).text(0);e.getJSON("http://cdn.api.twitter.com/1/urls/count.json?url="+$URL+"&callback=?",function(t){e("span.csbuttons-count",y).text(t.count);i+=isNaN(parseInt(t.count))?0:parseInt(t.count);if(r.total!=null&&o==s)e(r.total).text(i)})}break;case"google":var b=e(this);u++;v=600;m=600;g="https://plus.google.com/share?url="+t;g=d!=null?g+"&hl="+d:g;if(l){e("span.csbuttons-count",b).text(0);if(h!=null){e.post("https://clients6.google.com/rpc?key="+h,{method:"pos.plusones.get",id:"p",params:{nolog:true,id:$URL,source:"widget",userId:"@viewer",groupId:"@self"},jsonrpc:"2.0",key:"p",apiVersion:"v1"},function(t){e("span.csbuttons-count",b).text(t.result.metadata.globalCounts.count);i+=isNaN(parseInt(t.result.metadata.globalCounts.count))?0:parseInt(t.result.metadata.globalCounts.count);if(r.total!=null&&o==s)e(r.total).text(i)})}else{window["gplus"+u]=b;if(!window.services)window.services={};window.services.gplus={cb:function(e){window["gplusnb"+u]=e==""?0:e}};e.getScript("http://share.yandex.ru/gpp.xml?url="+$URL+"&callback=?",function(){e("span.csbuttons-count",b).text(window["gplusnb"+u]);i+=isNaN(parseInt(window["gplusnb"+u]))?0:parseInt(window["gplusnb"+u]);if(r.total!=null&&o==s)e(r.total).text(i)})}}break;case"linkedin":var w=e(this);v=600;m=213;g="https://www.linkedin.com/cws/share?url="+t;if(l){e("span.csbuttons-count",w).text(0);e.getJSON("http://www.linkedin.com/countserv/count/share?url="+$URL+"&callback=?",function(t){e("span.csbuttons-count",w).text(t.count);i+=isNaN(parseInt(t.count))?0:parseInt(t.count);if(r.total!=null&&o==s)e(r.total).text(i)})}break;case"pinterest":var E=e(this);v=1e3;m=617;g="http://www.pinterest.com/pin/create/button/?url="+t;g=p!=null?g+"&media="+p:g;g=a!=null?g+"&description="+a:g;if(l){e("span.csbuttons-count",E).text(0);e.getJSON("https://api.pinterest.com/v1/urls/count.json?url="+$URL+"&callback=?",function(t){e("span.csbuttons-count",E).text(t.count);i+=isNaN(parseInt(t.count))?0:parseInt(t.count);if(r.total!=null&&o==s)e(r.total).text(i)})}break;default:var S=e(this);v=670;m=340;g="https://www.facebook.com/sharer/sharer.php?u="+t;if(l){e("span.csbuttons-count",S).text(0);e.getJSON("http://graph.facebook.com/?id="+$URL,function(t){e("span.csbuttons-count",S).text(t.shares);i+=isNaN(parseInt(t.shares))?0:parseInt(t.shares);if(r.total!=null&&o==s)e(r.total).text(i)})}break}e(this).on("click tap",function(){var e=screen.width/2-v/2;var t=screen.height/2-m/2;popupWindow=window.open(g,"popUpWindow","height="+m+",width="+v+",left="+e+",top="+t+",resizable=yes,scrollbars=yes,toolbar=no,menubar=no,location=no,directories=no,status=yes")})})}})(jQuery)